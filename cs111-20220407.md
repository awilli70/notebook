# CS 111 Class Notes 2022/04/07

Recap:
When is it safest to write actual changes to a fs? After writing the Transaction End Block (TxE) to the log

* If all actions had been written but transaction was not logged, the transaction would be ignored (action shouldn't happen)

Create atomic operations of things that aren't atomic using transactions.

## File System Reliability - Fault tolerance and RAID

* Fault - failure in a component of a system
* Fault tolerance - avoiding component failures leading to system failures
* Durability - Data in persistent storage will not be lost

3 keys to fault tolerance

1. Redundancy - temporal
  * Takes more time
  * eg restart program/ run multiple times in sequence
2. Redundancy - spatial
  * Takes more space
  * multiple copies/ multiple times in parallel
3. Detecting when a fault has happened

### Checkpoints

* During execution, save the current state of the program
* If program crashes, load most recent checkpoint and continue
* Useful for long running computations

Pros:

* Because it takes so long, not checkpointing is **significantly** worse
* If something goes wrong, the cost of checkpointing suddenly becomes very worthwhile

Cons:

* Will slow execution down (pretty dramatically)
* Over many machines, becomes even worse - and can't store it locally (save over network to 
  multiple locations)

Network Retransmissions

* IP may lose packets
* TCP provides a layer of reliability by compensating for lost packets
* End-to-End principle - reliability just needs to be between sender and receiver


